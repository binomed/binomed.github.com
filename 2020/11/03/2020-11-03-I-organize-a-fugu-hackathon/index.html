
 <!DOCTYPE HTML>
<html lang="fr-FR">
<head>
  <meta charset="UTF-8">
  
    <title>I organized a Project Fugu hackathon | Binomed Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="jefBinomed">
    

    
    <meta name="description" content="A month ago, I organized (with a colleague of mine, G√©r√¥me Grignon) a Hackathon based on the Project Fugu ‚ÄúShape Detection API‚Äù.  TLDR;The shape detection api is very easy web API to use but it has lo">
<meta property="og:type" content="article">
<meta property="og:title" content="I organized a Project Fugu hackathon">
<meta property="og:url" content="http://jef.binomed.fr/2020/11/03/2020-11-03-I-organize-a-fugu-hackathon/index.html">
<meta property="og:site_name" content="Binomed Blog">
<meta property="og:description" content="A month ago, I organized (with a colleague of mine, G√©r√¥me Grignon) a Hackathon based on the Project Fugu ‚ÄúShape Detection API‚Äù.  TLDR;The shape detection api is very easy web API to use but it has lo">
<meta property="og:locale" content="fr_FR">
<meta property="og:image" content="http://jef.binomed.fr/assets/2020-10-push-the-limit/push-the-limit.png">
<meta property="og:image" content="http://jef.binomed.fr/assets/2020-10-push-the-limit/gerome.jpeg">
<meta property="og:image" content="http://jef.binomed.fr/assets/2020-10-push-the-limit/canary_88.0.4306.0.png">
<meta property="og:image" content="http://jef.binomed.fr/assets/2020-10-push-the-limit/stable_86.0.4240.111.png">
<meta property="og:image" content="http://jef.binomed.fr/assets/2020-10-push-the-limit/canary_88.0.4306.0-MacOS_10.15.7.png">
<meta property="og:image" content="http://jef.binomed.fr/assets/2020-10-push-the-limit/stable_86.0.4240.111-fast.png">
<meta property="article:published_time" content="2020-11-03T13:21:01.000Z">
<meta property="article:modified_time" content="2024-01-26T15:18:47.707Z">
<meta property="article:author" content="jefBinomed">
<meta property="article:tag" content="web">
<meta property="article:tag" content="fugu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://jef.binomed.fr/assets/2020-10-push-the-limit/push-the-limit.png">
<meta name="twitter:creator" content="@jefBinomed">

    
    <link rel="alternative" href="/atom.xml" title="Binomed Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/binomed_alizarin.png">
    <link rel="apple-touch-icon-precomposed" href="/img/binomed_alizarin.png">
    
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 7.1.1"></head>

  <body>
    <header>
      
	
	<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/binomed_alizarin.png" alt="Binomed Blog" title="Binomed Blog"/></a>
			</div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Binomed Blog">Binomed Blog</a></h1>
				<h2 class="blog-motto">Another G33k blog</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Recherche" />
						<input type="hidden" name="q" value="site:jef.binomed.fr">
					</form>
					
					</li>
				</ul>
			</nav>			
	
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/11/03/2020-11-03-I-organize-a-fugu-hackathon/" title="I organized a Project Fugu hackathon" itemprop="url">I organized a Project Fugu hackathon</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/+JeanFrancoisGarreau?rel=author" title="jefBinomed" target="_blank" itemprop="author">jefBinomed</a>
		
  <p class="article-time">
    <time datetime="2020-11-03T13:21:01.000Z" itemprop="datePublished"> Publi√© 3 Nov 2020</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contenu</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#TLDR"><span class="toc-number">1.</span> <span class="toc-text">TLDR;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Push-the-limit"><span class="toc-number">2.</span> <span class="toc-text">Push the limit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Under-the-hood"><span class="toc-number">3.</span> <span class="toc-text">Under the hood</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Some-Helpers-for-particpants"><span class="toc-number">4.</span> <span class="toc-text">Some Helpers for particpants</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Detector-js"><span class="toc-number">4.1.</span> <span class="toc-text">Detector.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UserMedia-js"><span class="toc-number">4.2.</span> <span class="toc-text">UserMedia.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CodeSandBox"><span class="toc-number">4.3.</span> <span class="toc-text">CodeSandBox</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Demos-writen"><span class="toc-number">4.3.1.</span> <span class="toc-text">Demos writen</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Special-Trick-for-image"><span class="toc-number">4.3.2.</span> <span class="toc-text">Special Trick for image</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#What-we-learn"><span class="toc-number">5.</span> <span class="toc-text">What we learn</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FaceDetector"><span class="toc-number">5.1.</span> <span class="toc-text">FaceDetector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BarCodeDetector"><span class="toc-number">5.2.</span> <span class="toc-text">BarCodeDetector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TextDetector"><span class="toc-number">5.3.</span> <span class="toc-text">TextDetector</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Credits"><span class="toc-number">6.</span> <span class="toc-text">Credits</span></a></li></ol>
		
		</div>
		
		<p>A month ago, I organized (with a colleague of mine, <a href="https://twitter.com/geromegrignon">G√©r√¥me Grignon</a>) a Hackathon based on the Project Fugu ‚ÄúShape Detection API‚Äù.</p>
<p><img src="/assets/2020-10-push-the-limit/push-the-limit.png" alt="morty"></p>
<h1 id="TLDR"><a href="#TLDR" class="headerlink" title="TLDR;"></a>TLDR;</h1><p>The shape detection api is very easy web API to use but it has lots of limitations according to the platform you have. If you are curious about what we done, you can read this article üòá.</p>
<h1 id="Push-the-limit"><a href="#Push-the-limit" class="headerlink" title="Push the limit"></a>Push the limit</h1><p>As you can imagine, we wanted to create a fun Hackathon, a hackthon where the fun and the creativity were more important than the social impact of the result üòÖ.</p>
<p>The main idea of this hackathon was to play with the <a href="https://web.dev/shape-detection/">Shape Detection API</a>. </p>
<blockquote>
<p>TLDR; This API lets you find your shapes in images. The shape is restricted by the web platform, you could recognize a face, a barcode or some text (not implemented yet)</p>
</blockquote>
<h1 id="Under-the-hood"><a href="#Under-the-hood" class="headerlink" title="Under the hood"></a>Under the hood</h1><p>This API is interesting because with very few lines of codes you have something that gives you the position of shapes detected in an ImageBitmapSource. An image is nice, but a canvas is better üòâ. Indeed, a canvas can generate data that the detector could interpret.</p>
<p>Here is for example how you can detect a face: </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> faceDetector = <span class="keyword">new</span> <span class="title class_">FaceDetector</span>(&#123;</span><br><span class="line">  <span class="comment">// (Optional) Hint to try and limit the amount of detected faces</span></span><br><span class="line">  <span class="comment">// on the scene to this maximum number.</span></span><br><span class="line">  <span class="attr">maxDetectedFaces</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="comment">// (Optional) Hint to try and prioritize speed over accuracy</span></span><br><span class="line">  <span class="comment">// by, e.g., operating on a reduced scale or looking for large features.</span></span><br><span class="line">  <span class="attr">fastMode</span>: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> faces = <span class="keyword">await</span> faceDetector.<span class="title function_">detect</span>(image);</span><br><span class="line">  faces.<span class="title function_">forEach</span>(<span class="function"><span class="params">face</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(face));</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Face detection failed:&#x27;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The object face returned is an array with all positions of the detected faces in the image or canvas.</p>
<p>Here is the result of face detection: </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">boudingBox</span>: <span class="comment">// DOMRectReadOnly / The position and size of the face</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">bottom</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute bottom position in the image</span></span><br><span class="line">            <span class="attr">height</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute height in the image</span></span><br><span class="line">            <span class="attr">left</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute left position in the image</span></span><br><span class="line">            <span class="attr">right</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute right position in the image</span></span><br><span class="line">            <span class="attr">top</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute top position in the image</span></span><br><span class="line">            <span class="attr">width</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute width in the image</span></span><br><span class="line">            <span class="attr">x</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute left position in the image</span></span><br><span class="line">            <span class="attr">y</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute top position in the image</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">landmarks</span>: <span class="comment">// Some points to position eyes, mouth and nose</span></span><br><span class="line">        [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;eye&#x27;</span>, <span class="comment">// could be also &#x27;mouth&#x27; or &#x27;nose&#x27;</span></span><br><span class="line">                <span class="attr">locations</span>: <span class="comment">// Array of point that you use to draw the part of face</span></span><br><span class="line">                [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">x</span>: xxx.<span class="property">xxx</span> <span class="comment">// left position of element in the image</span></span><br><span class="line">                        <span class="attr">y</span>: xxx.<span class="property">xxx</span> <span class="comment">// right position of element in the image</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    , ...</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">            ,...</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">    ,...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>Here is the result of barcode detection: </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">boudingBox</span>: <span class="comment">// DOMRectReadOnly / The position and size of the face</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">bottom</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute bottom position in the image</span></span><br><span class="line">            <span class="attr">height</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute height in the image</span></span><br><span class="line">            <span class="attr">left</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute left position in the image</span></span><br><span class="line">            <span class="attr">right</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute right position in the image</span></span><br><span class="line">            <span class="attr">top</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute top position in the image</span></span><br><span class="line">            <span class="attr">width</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute width in the image</span></span><br><span class="line">            <span class="attr">x</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute left position in the image</span></span><br><span class="line">            <span class="attr">y</span>: xxx.<span class="property">xxx</span> <span class="comment">// absolute top position in the image</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">format</span>: <span class="string">&#x27;qr_code&#x27;</span>, <span class="comment">// Could be &#x27;aztec&#x27;, &#x27;code_128&#x27;, &#x27;code_39&#x27;, &#x27;code_93&#x27;, &#x27;codabar&#x27;,</span></span><br><span class="line">        <span class="comment">// &#x27;data_matrix&#x27;, &#x27;ean_13&#x27;, &#x27;ean_8&#x27;, &#x27;itf&#x27;, &#x27;pdf417&#x27;, &#x27;qr_code&#x27;, &#x27;upc_a&#x27;, &#x27;upc_e&#x27;</span></span><br><span class="line">        <span class="attr">rawValue</span>: <span class="string">&#x27;text in the code&#x27;</span>, <span class="comment">// the value of the barcode</span></span><br><span class="line">        <span class="attr">cornerPoints</span>: <span class="comment">// Position of corner points of barcode</span></span><br><span class="line">        [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">x</span>: xxx.<span class="property">xxx</span> <span class="comment">// left position of element in the image</span></span><br><span class="line">                <span class="attr">y</span>: xxx.<span class="property">xxx</span> <span class="comment">// right position of element in the image</span></span><br><span class="line">            &#125;</span><br><span class="line">            , ...</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">    ,...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>For the moment, the TextDetector is not yet universally available üòÖ.</p>
<h1 id="Some-Helpers-for-particpants"><a href="#Some-Helpers-for-particpants" class="headerlink" title="Some Helpers for particpants"></a>Some Helpers for particpants</h1><p>Even if the API is really easy to use, combine it to video, canvas, a performant mechanism is a synonym of lots of boilerplate. Indeed, when you want to play with the camera, you need to follow those steps to be sure to not block the UI thread.</p>
<ol>
<li>Start the camera with the correct parameters</li>
<li>Inject the stream to an HTML <code>video</code> element (and keep a copy somewhere)</li>
<li>Start to play with <code>requestAnimationFrame</code> to be sure to optimize the rendering.</li>
<li>On each frame, draw the video on your canvas</li>
<li>Start a detection in asynchronous mode (the result will arrive in another frame)</li>
<li>If a result of detection is present, then you can draw something</li>
</ol>
<p>Each of those steps has specific code and it could be lots of code for just detection and drawing something üòÖ. That‚Äôs why we create some helpers that you could use too if you want for your projects.</p>
<h2 id="Detector-js"><a href="#Detector-js" class="headerlink" title="Detector.js"></a>Detector.js</h2><p>This file wraps and exposes methods to detect things on the image</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Detector</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Will create the write dectector object according to the type.</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> type: the type of detector to use -&gt; see constant TYPES to use the correct types</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> options: each detector should work with specifics options that could override. Check the desire constant. Note that text detector don&#x27;t need options</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">type, options</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Where the magic happens ;)</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> image: the source image or canvas where we want to detect something</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@returns</span> a Promise with the result of the detection</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="title function_">detect</span>(<span class="params">image</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Helper function to check if the browser supports the feature</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> true or false according to your browser support</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isAvailable</span>(<span class="params">type</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* The managed types</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">TYPES</span> = &#123;</span><br><span class="line">  <span class="attr">face</span>: <span class="string">&quot;face&quot;</span>,</span><br><span class="line">  <span class="attr">text</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">  <span class="attr">barcode</span>: <span class="string">&quot;barcode&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* The options of face</span></span><br><span class="line"><span class="comment">* You can override the number of detected faces</span></span><br><span class="line"><span class="comment">* FastMode is to use when you want to have a quick result. The result will be less precise if fastMode is set to true</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">OPTIONS_FACE</span> = &#123;</span><br><span class="line">  <span class="attr">maxDetectedFaces</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">fastMode</span>: <span class="literal">false</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* The list if BARCODE format to check. You can reduce this list if you want to speed detection process</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">OPTIONS_BARCODE</span> = &#123;</span><br><span class="line">  <span class="attr">formats</span>: [</span><br><span class="line">    <span class="string">&quot;aztec&quot;</span>,</span><br><span class="line">    <span class="string">&quot;code_128&quot;</span>,</span><br><span class="line">    <span class="string">&quot;code_39&quot;</span>,</span><br><span class="line">    <span class="string">&quot;code_93&quot;</span>,</span><br><span class="line">    <span class="string">&quot;codabar&quot;</span>,</span><br><span class="line">    <span class="string">&quot;data_matrix&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ean_13&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ean_8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;itf&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pdf417&quot;</span>,</span><br><span class="line">    <span class="string">&quot;qr_code&quot;</span>,</span><br><span class="line">    <span class="string">&quot;upc_a&quot;</span>,</span><br><span class="line">    <span class="string">&quot;upc_e&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>The source code is available here <a href="https://gist.github.com/jefBinomed/031d77184db58768468e81738108ee7b#file-detector-js">Gist Detector</a></p>
<h2 id="UserMedia-js"><a href="#UserMedia-js" class="headerlink" title="UserMedia.js"></a>UserMedia.js</h2><p>UserMedia is the API used to request camera input. We create this class :</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserMediaHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> canvas: the dom element corresponding to canvas</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> video: the dom element corresponding to video</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> videoArea: the dom element around the canvas (to fix the size of the output video)</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">canvas, video, videoArea</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Method to call to receive the results of the detection</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> type: the type of detector to use -&gt; See the Helper Detector to have more information</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> options: the options passed to the previous detector. If you want to use TextDetector, please give &quot;null&quot; as value</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> callback: the callback function that will receive the results of the detection. The function should be like (detectedObject)=&gt;&#123;&#125;</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="title function_">addDetectorCallbak</span>(<span class="params">type, options, callback</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Method to call if you want to draw something on the canvas based on the detection</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> callBackFunction: the method call at every frame to draw on the canvas. The function should be like (context, video, canvas) =&gt; &#123;&#125;</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="title function_">addCallbackDraw</span>(<span class="params">callBackFunction</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * This method should be called to stop the process of captation and detection</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="title function_">stop</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Call this method to start the captation and detection process</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getUserMedia</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The source code is available here <a href="https://gist.github.com/jefBinomed/031d77184db58768468e81738108ee7b#file-usermedia-js">Gist usermedia</a></p>
<p>As you can see, the UserMedia helper uses a detector.</p>
<p>The Helper provides also a method to stop your camera in the right way üòé.</p>
<h2 id="CodeSandBox"><a href="#CodeSandBox" class="headerlink" title="CodeSandBox"></a>CodeSandBox</h2><p>To continue helping attendees, we created a codesandbox sample to clone so that attendees could start directly. Here is the result of the codesandbox.</p>
<p>To be sure that it works with your configuration, check if you have enabled the flags.</p>
<ul>
<li>Demo: <a href="https://bg3o4.csb.app/">Pickle Rick Me</a></li>
<li>CodeSandBox to clone: <a href="https://codesandbox.io/s/young-tree-bg3o4">CodeSandBox Push The Limit</a></li>
</ul>
<h3 id="Demos-writen"><a href="#Demos-writen" class="headerlink" title="Demos writen"></a>Demos writen</h3><p>Here is the list of demos people write :)</p>
<ul>
<li>Face Face Revolution (a dance dance revolution but with your face): <a href="https://codesandbox.io/s/z3opl">https://codesandbox.io/s/z3opl</a></li>
<li>Draw a pickle rick if a barcode is found (android only): <a href="https://codesandbox.io/s/891md">https://codesandbox.io/s/891md</a></li>
<li>Like Pickel Rick but with a random character of smash ultimate game: <a href="https://codesandbox.io/s/festive-wiles-f9hbs?file=/src/index.js">https://codesandbox.io/s/festive-wiles-f9hbs?file=/src/index.js</a></li>
<li>Draw a ‚Äújoker‚Äù smile and if you open your mouth show a grumpycat (only specifics version, see bugs and restrictions after): <a href="https://codesandbox.io/s/elegant-mayer-up20v">https://codesandbox.io/s/elegant-mayer-up20v</a></li>
<li>A Game where a Pickle Rick have to eat pickle coming from the top of the screen: <a href="https://codesandbox.io/s/young-flower-s0162">https://codesandbox.io/s/young-flower-s0162</a></li>
</ul>
<h3 id="Special-Trick-for-image"><a href="#Special-Trick-for-image" class="headerlink" title="Special Trick for image"></a>Special Trick for image</h3><p>During the preparation of this hackathon, we faced a problem with the pickle image and the drawing of the pickle on the canvas. Indeed, I didn‚Äôt know it before but Canvas is also sensible to CORS origin security when you draw an image! </p>
<p>To understand that, you have to understand that codesandbox doesn‚Äôt host the image in the same origin of your page. The resource is redirected under the hood to a bucket S3. To bypass this problem, we simply write a script that downloads the image from the amazon server, extracts the data, converts them to base64 and injects this base64 data as the source to the original <code>img</code>. In that way, you can continue to draw images on canvas without facing any CORS problem ü•≥</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">prepareImage</span>(<span class="params">img</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(img.<span class="property">src</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> response.<span class="title function_">blob</span>())</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">blob</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">        reader.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">          img.<span class="property">src</span> = <span class="variable language_">this</span>.<span class="property">result</span>;</span><br><span class="line">          <span class="title function_">resolve</span>();</span><br><span class="line">        &#125;; <span class="comment">// &lt;--- `this.result` contains a base64 data URI</span></span><br><span class="line">        reader.<span class="title function_">readAsDataURL</span>(blob);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="What-we-learn"><a href="#What-we-learn" class="headerlink" title="What we learn"></a>What we learn</h1><p>During this session, we have different kinds of developers and environment so here is the conclusion as of <strong>‚ÄòOct 2020‚Äô</strong>.</p>
<p>Please have in mind that Shape Detection API is still an experimental API, so the conclusion what I will write now could be not the same as what you see when you will read this post.</p>
<h2 id="FaceDetector"><a href="#FaceDetector" class="headerlink" title="FaceDetector"></a>FaceDetector</h2><p>Face detection works well but not everywhere. Indeed, we couldn‚Äôt make it work on those platform: </p>
<ul>
<li>Chrome Android (it‚Äôs a bug <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1107675">bc1107675</a>) When this article is written, a fix has been deployed and should be shipped with chrome 88</li>
<li>Chrome Linux (it has never worked <a href="https://github.com/WICG/shape-detection-api#overview">Overview api</a>)</li>
<li>Chrome Mac -&gt; The landmarks aren‚Äôt well positioned (it‚Äôs a bug too <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=914348">bc914348</a>)</li>
</ul>
<p>Fun fact, the face recognition is based on eyes position, it is a COVID proof API üò∑üòÖ.</p>
<p>If you wear glasses but big glasses, the recognition could be very lacky.</p>
<p><img src="/assets/2020-10-push-the-limit/gerome.jpeg" alt="G√©r√¥me"></p>
<p>Indeed G√©r√¥me as you can see wear big glasses. When he wears them, face recognition wasn‚Äôt very smooth, my Pickle Rick move with visible steps. But when he removes its glasses, the Pickle Rick follow its face.</p>
<p><video src="/assets/2020-10-push-the-limit/big-glasses.mp4"  type="video/mp4" controls></video></p>
<p>The bug of Landmarks could be for the moment bypass by using <code>fast</code> mode. This bug is platform dependent. Here are the results according to the platform I could test: </p>
<p><img src="/assets/2020-10-push-the-limit/canary_88.0.4306.0.png" alt="Chrome Canary 88.0.4306.0 - MacOS 10.14.6"></p>
<p><img src="/assets/2020-10-push-the-limit/stable_86.0.4240.111.png" alt="Chrome Stable 86.0.4240.111 - MacOS 10.14.6"></p>
<p><img src="/assets/2020-10-push-the-limit/canary_88.0.4306.0-MacOS_10.15.7.png" alt="Chrome Canary 88.0.4306.0 - MacOS 10.15.7"></p>
<p><img src="/assets/2020-10-push-the-limit/stable_86.0.4240.111-fast.png" alt="Chrome Stable 86.0.4240.111 - MacOS 10.14.6 - fast mode"></p>
<p>You could test this at this url : <a href="https://mona-lisa.glitch.me/">https://mona-lisa.glitch.me/</a> or <a href="https://mona-lisa.glitch.me/?fast">https://mona-lisa.glitch.me/?fast</a></p>
<h2 id="BarCodeDetector"><a href="#BarCodeDetector" class="headerlink" title="BarCodeDetector"></a>BarCodeDetector</h2><p>The BarCodeDetector which was working previously on Android and Desktop is just working on Android for devices with the Google Play Services. It‚Äôs a limitation for the moment but we could hope that tomorrow, something based on non ‚Äúnative‚Äù solution will arrive: </p>
<blockquote>
<p>This API is part of the new capabilities project. Barcode detection has launched in Chrome 83 on certified devices with Google Play Services installed. Face and text detection are available behind a flag. This post will be updated as the Shape Detection API evolves</p>
</blockquote>
<p>But it works in those conditions ü§ó</p>
<h2 id="TextDetector"><a href="#TextDetector" class="headerlink" title="TextDetector"></a>TextDetector</h2><p>This feature isn‚Äôt yet implemented in the tested devices so no-one could test it. And Google is also alerting that it‚Äôs not universally available.</p>
<h1 id="Credits"><a href="#Credits" class="headerlink" title="Credits"></a>Credits</h1><p>Thank you to Fran√ßois Beaufort who helped me debug and explore some of those APIs after the Hackathon and who reviewed this article.<br>Thank you also to G√©r√¥me Grignon who helped me to lead this workshop.</p>
<script type="text/javascript" src="/assets/js_helper/jef-binomed-helper.js"></script>
<script type="text/javascript" src="/assets/2020-10-push-the-limit/push-the-limit.js"></script>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

  <div class="article-tags">
  
  <span></span> <a href="/tags/web/">web</a><a href="/tags/fugu/">fugu</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Event/">Event</a>
</div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://jef.binomed.fr/2020/11/03/2020-11-03-I-organize-a-fugu-hackathon/" data-title="I organized a Project Fugu hackathon | Binomed Blog" data-tsina="" class="share clearfix">
	  </div>
	
	</div>

</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2024/01/31/2024-01-31-pere-jf-raconte-nous-le-devfest-part-1/" title="P√®re JF, raconte nous le DevFest Nantes - La gen√®se">
  <strong>PREVIOUS:</strong><br/>
  <span>
  P√®re JF, raconte nous le DevFest Nantes - La gen√®se</span>
</a>
</div>


<div class="next">
<a href="/2018/11/30/2018-11-30-5-years-of-DevFest-CountDown-part3/"  title="5 years of DevFest CountDown - Part 3">
 <strong>NEXT:</strong><br/> 
 <span>5 years of DevFest CountDown - Part 3
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Afficher Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contenu</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#TLDR"><span class="toc-number">1.</span> <span class="toc-text">TLDR;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Push-the-limit"><span class="toc-number">2.</span> <span class="toc-text">Push the limit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Under-the-hood"><span class="toc-number">3.</span> <span class="toc-text">Under the hood</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Some-Helpers-for-particpants"><span class="toc-number">4.</span> <span class="toc-text">Some Helpers for particpants</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Detector-js"><span class="toc-number">4.1.</span> <span class="toc-text">Detector.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UserMedia-js"><span class="toc-number">4.2.</span> <span class="toc-text">UserMedia.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CodeSandBox"><span class="toc-number">4.3.</span> <span class="toc-text">CodeSandBox</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Demos-writen"><span class="toc-number">4.3.1.</span> <span class="toc-text">Demos writen</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Special-Trick-for-image"><span class="toc-number">4.3.2.</span> <span class="toc-text">Special Trick for image</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#What-we-learn"><span class="toc-number">5.</span> <span class="toc-text">What we learn</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FaceDetector"><span class="toc-number">5.1.</span> <span class="toc-text">FaceDetector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BarCodeDetector"><span class="toc-number">5.2.</span> <span class="toc-text">BarCodeDetector</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TextDetector"><span class="toc-number">5.3.</span> <span class="toc-text">TextDetector</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Credits"><span class="toc-number">6.</span> <span class="toc-text">Credits</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Cacher Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Cat√©gories</p>
		<ul>
		
		  
			<li><a href="/categories/Conference/" title="Conference">Conference<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Event/" title="Event">Event<sup>16</sup></a></li>
		  
		
		  
			<li><a href="/categories/News/" title="News">News<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Tech/" title="Tech">Tech<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/Tips/" title="Tips">Tips<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/tips/" title="tips">tips<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Devfest/" title="Devfest">Devfest<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Organisation/" title="Organisation">Organisation<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/DevFest/" title="DevFest">DevFest<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/tips/" title="tips">tips<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/speaker/" title="speaker">speaker<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/nodeJS/" title="nodeJS">nodeJS<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/myo/" title="myo">myo<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/devfest/" title="devfest">devfest<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/polymer/" title="polymer">polymer<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Firebase/" title="Firebase">Firebase<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/devtools/" title="devtools">devtools<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Canvas/" title="Canvas">Canvas<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/leap-motion/" title="leap motion">leap motion<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/arduino/" title="arduino">arduino<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ev3/" title="ev3">ev3<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/css/" title="css">css<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/canvas/" title="canvas">canvas<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/chrome/" title="chrome">chrome<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/html5/" title="html5">html5<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="linkslist">
  <p class="asidetitle">Liens</p>
    <ul>
        
          <li>
            
            	<a href="http://gdgnantes.com" target="_blank" title="GDG Nantes">GDG Nantes</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.nantes-wit.fr" target="_blank" title="Nantes Wit">Nantes Wit</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.devoxx4kids.org/france/" target="_blank" title="Devoxx4Kids">Devoxx4Kids</a>
            
          </li>
        
          <li>
            
            	<a href="https://nantescodinggouters.wordpress.com/" target="_blank" title="Coding Go√ªters">Coding Go√ªters</a>
            
          </li>
        
          <li>
            
            	<a href="http://jef.binomed.fr/binomed_docs" target="_blank" title="JefBinomed Slides">JefBinomed Slides</a>
            
          </li>
        
          <li>
            
            	<a href="https://devfest.gdgnantes.com" target="_blank" title="DevFest Nantes">DevFest Nantes</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> I am Jean-Fran√ßois Garreau, geek, dad, developer <br/>
			I also host the GDG Nantes, Nantes WIT and Devoxx4Kids</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/jefBinomed" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/jefBinomed" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		
		<a href="https://www.linkedin.com/in/jean-fran√ßois-garreau" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		
		
		<a href="https://plus.google.com/+JeanFrancoisGarreau?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> ¬© 2024 
		
		<a href="/about" target="_blank" title="jefBinomed">jefBinomed</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google_plus" target="_blank" title="Google Plus" onclick="javascript:window.open(this.href,\'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600\');return false;" ></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'binomedblog';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-21310883-4', 'jef.binomed.fr');  
ga('send', 'pageview');
</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Retour en haut"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
